---
title: "Cursorã§ãƒ‘ã‚¹ã‚­ãƒ¼ã‚’å‹•ã‹ã—ã¦ã¿ãŸ"
emoji: "ğŸ”‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Cursor", "Passkey", "èªè¨¼", "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£", "WebAuthn"]
published: false
---

# Cursorã§ãƒ‘ã‚¹ã‚­ãƒ¼ã‚’å‹•ã‹ã—ã¦ã¿ãŸ

ã“ã‚“ã«ã¡ã¯ï¼ã“ã®è¨˜äº‹ã§ã¯ã€Cursorã‚¨ãƒ‡ã‚£ã‚¿ã§ãƒ‘ã‚¹ã‚­ãƒ¼ï¼ˆPasskeyï¼‰èªè¨¼ã‚’å®Ÿè£…ã—ã¦å‹•ã‹ã—ã¦ã¿ãŸçµŒé¨“ã‚’å…±æœ‰ã—ã¾ã™ã€‚ãƒ‘ã‚¹ã‚­ãƒ¼ã¯æœ€æ–°ã®èªè¨¼æŠ€è¡“ã§ã‚ã‚Šã€å¾“æ¥ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ä»£ã‚ã‚‹å®‰å…¨ãªé¸æŠè‚¢ã¨ã—ã¦æ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ãƒ‘ã‚¹ã‚­ãƒ¼ï¼ˆPasskeyï¼‰ã¨ã¯

ãƒ‘ã‚¹ã‚­ãƒ¼ã¯ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ä»£ã‚ã‚‹æ–°ã—ã„èªè¨¼æ–¹æ³•ã§ã™ã€‚FIDO2ã¨WebAuthnã«åŸºã¥ã„ã¦ãŠã‚Šã€ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°è€æ€§ãŒã‚ã‚Šã€ã‚ˆã‚Šå®‰å…¨ã§ä½¿ã„ã‚„ã™ã„èªè¨¼ã‚’æä¾›ã—ã¾ã™ã€‚

ä¸»ãªç‰¹å¾´ï¼š
- ç”Ÿä½“èªè¨¼ï¼ˆæŒ‡ç´‹ã€é¡”èªè¨¼ãªã©ï¼‰ã‚’åˆ©ç”¨
- ãƒ‡ãƒã‚¤ã‚¹ã«ä¿å­˜ã•ã‚Œã‚‹ç§˜å¯†éµã‚’ä½¿ç”¨
- ã‚µãƒ¼ãƒãƒ¼ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¿å­˜ã•ã‚Œãªã„
- ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°æ”»æ’ƒã«å¼·ã„
- ã‚¯ãƒ­ã‚¹ãƒ‡ãƒã‚¤ã‚¹ã§ã®åˆ©ç”¨ãŒå¯èƒ½

### ãƒ‘ã‚¹ã‚­ãƒ¼ã®ä»•çµ„ã¿

ãƒ‘ã‚¹ã‚­ãƒ¼ã¯å…¬é–‹éµæš—å·æ–¹å¼ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒã‚¤ã‚¹ã«ã¯ç§˜å¯†éµãŒä¿å­˜ã•ã‚Œã€ã‚µãƒ¼ãƒ“ã‚¹å´ã«ã¯å…¬é–‹éµãŒç™»éŒ²ã•ã‚Œã¾ã™ã€‚èªè¨¼æ™‚ã«ã¯ã€ãƒãƒ£ãƒ¬ãƒ³ã‚¸-ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ–¹å¼ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ¬äººç¢ºèªãŒè¡Œã‚ã‚Œã¾ã™ã€‚

## Cursorã‚¨ãƒ‡ã‚£ã‚¿ã§ã®å®Ÿè£…

Cursorã¯ã€AIã‚’æ´»ç”¨ã—ãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ”¯æ´æ©Ÿèƒ½ã‚’æŒã¤æ¬¡ä¸–ä»£ã®ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã§ã™ã€‚ã“ã®ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ã£ã¦ã€ãƒ‘ã‚¹ã‚­ãƒ¼èªè¨¼ã®å®Ÿè£…ã‚’è©¦ã¿ã¾ã—ãŸã€‚

### ç’°å¢ƒæ§‹ç¯‰

ã¾ãšã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š

```bash
npm install @simplewebauthn/server @simplewebauthn/browser
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

Node.jsã¨Expressã‚’ä½¿ç”¨ã—ãŸãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®åŸºæœ¬çš„ãªå®Ÿè£…ä¾‹ï¼š

```javascript
const express = require('express');
const { generateRegistrationOptions, verifyRegistrationResponse } = require('@simplewebauthn/server');

const app = express();
app.use(express.json());

// ãƒ‘ã‚¹ã‚­ãƒ¼ç™»éŒ²ã®ãŸã‚ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚’ç”Ÿæˆ
app.post('/generate-registration-options', async (req, res) => {
  const options = await generateRegistrationOptions({
    rpName: 'My Application',
    rpID: 'example.com',
    userID: 'user123',
    userName: 'testuser@example.com',
    attestationType: 'none',
    authenticatorSelection: {
      userVerification: 'preferred',
      residentKey: 'required',
    },
  });
  
  // ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¿å­˜
  req.session.currentChallenge = options.challenge;
  
  res.json(options);
});

// ç™»éŒ²æ¤œè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
app.post('/verify-registration', async (req, res) => {
  const verification = await verifyRegistrationResponse({
    response: req.body,
    expectedChallenge: req.session.currentChallenge,
    expectedOrigin: 'https://example.com',
    expectedRPID: 'example.com',
  });
  
  if (verification.verified) {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èªè¨¼æƒ…å ±ã‚’ä¿å­˜
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹å‡¦ç†ã‚’ã“ã“ã«è¨˜è¿°
    res.json({ verified: true });
  } else {
    res.json({ verified: false });
  }
});

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®ãƒ‘ã‚¹ã‚­ãƒ¼ç™»éŒ²å‡¦ç†ï¼š

```javascript
import { startRegistration } from '@simplewebauthn/browser';

async function registerPasskey() {
  try {
    // ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å–å¾—
    const optionsResponse = await fetch('/generate-registration-options', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
    });
    const options = await optionsResponse.json();
    
    // ãƒ–ãƒ©ã‚¦ã‚¶ã®WebAuthn APIã‚’ä½¿ç”¨ã—ã¦ç™»éŒ²ã‚’é–‹å§‹
    const registrationResponse = await startRegistration(options);
    
    // çµæœã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã—ã¦æ¤œè¨¼
    const verificationResponse = await fetch('/verify-registration', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(registrationResponse),
    });
    
    const verification = await verificationResponse.json();
    
    if (verification.verified) {
      alert('ãƒ‘ã‚¹ã‚­ãƒ¼ã®ç™»éŒ²ã«æˆåŠŸã—ã¾ã—ãŸï¼');
    } else {
      alert('ãƒ‘ã‚¹ã‚­ãƒ¼ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  } catch (error) {
    console.error('ã‚¨ãƒ©ãƒ¼:', error);
    alert('ãƒ‘ã‚¹ã‚­ãƒ¼ç™»éŒ²ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
  }
}

// ç™»éŒ²ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
document.getElementById('register-button').addEventListener('click', registerPasskey);
```

### èªè¨¼ãƒ•ãƒ­ãƒ¼ã®å®Ÿè£…

ç™»éŒ²å¾Œã®èªè¨¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ï¼‰ãƒ•ãƒ­ãƒ¼ã‚‚å®Ÿè£…ã—ã¾ã—ãŸï¼š

```javascript
import { startAuthentication } from '@simplewebauthn/browser';

async function authenticateWithPasskey() {
  try {
    // èªè¨¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å–å¾—
    const optionsResponse = await fetch('/generate-authentication-options', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
    });
    const options = await optionsResponse.json();
    
    // èªè¨¼ã‚’é–‹å§‹
    const authenticationResponse = await startAuthentication(options);
    
    // çµæœã‚’æ¤œè¨¼
    const verificationResponse = await fetch('/verify-authentication', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(authenticationResponse),
    });
    
    const verification = await verificationResponse.json();
    
    if (verification.verified) {
      alert('èªè¨¼ã«æˆåŠŸã—ã¾ã—ãŸï¼');
      // ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®å‡¦ç†
    } else {
      alert('èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  } catch (error) {
    console.error('èªè¨¼ã‚¨ãƒ©ãƒ¼:', error);
    alert('èªè¨¼ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
  }
}
```

## å®Ÿè£…ä¸­ã«é­é‡ã—ãŸèª²é¡Œ

ãƒ‘ã‚¹ã‚­ãƒ¼å®Ÿè£…ä¸­ã«ã„ãã¤ã‹ã®èª²é¡Œã«ç›´é¢ã—ã¾ã—ãŸï¼š

1. **ãƒ–ãƒ©ã‚¦ã‚¶ã®äº’æ›æ€§**: ä¸€éƒ¨ã®å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯WebAuthn APIãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„
2. **ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã®åˆ¶ç´„**: HTTPSãŒå¿…è¦ãªãŸã‚ã€é–‹ç™ºç’°å¢ƒã®è¨­å®šã«å·¥å¤«ãŒå¿…è¦
3. **ãƒ‡ãƒãƒƒã‚°ã®é›£ã—ã•**: èªè¨¼ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ‡ãƒãƒƒã‚°ãŒè¤‡é›‘
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®è¨­è¨ˆ**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èªè¨¼ã®å®Ÿè£…

## è§£æ±ºç­–ã¨å­¦ã‚“ã ã“ã¨

ã“ã‚Œã‚‰ã®èª²é¡Œã«å¯¾ã™ã‚‹è§£æ±ºç­–ï¼š

1. **ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒã‚§ãƒƒã‚¯**: å®Ÿè£…å‰ã«ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚µãƒãƒ¼ãƒˆçŠ¶æ³ã‚’ç¢ºèª
   ```javascript
   if (!window.PublicKeyCredential) {
     alert('ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯WebAuthnã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚æœ€æ–°ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚');
     return;
   }
   ```

2. **ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®è¨¼æ˜æ›¸**: mkcertãªã©ã‚’ä½¿ç”¨ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®æœ‰åŠ¹ãªè¨¼æ˜æ›¸ã‚’ä½œæˆ
   ```bash
   # mkcertã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   brew install mkcert
   mkcert -install
   
   # ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®è¨¼æ˜æ›¸ã‚’ä½œæˆ
   mkcert localhost 127.0.0.1
   ```

3. **æ®µéšçš„ãªãƒ†ã‚¹ãƒˆ**: å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’å€‹åˆ¥ã«ãƒ†ã‚¹ãƒˆã—ã¦å•é¡Œã‚’ç‰¹å®š
   - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’æ´»ç”¨
   - ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§WebAuthnã®ãƒ‡ãƒãƒƒã‚°
   - å°ã•ãªæ©Ÿèƒ½ã‹ã‚‰é †ã«ãƒ†ã‚¹ãƒˆ

4. **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **: ãƒ‘ã‚¹ã‚­ãƒ¼ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ç’°å¢ƒã§ã®ä»£æ›¿æ‰‹æ®µã‚’æä¾›

## Cursorã‚¨ãƒ‡ã‚£ã‚¿ã®æ´»ç”¨ãƒã‚¤ãƒ³ãƒˆ

Cursorã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã—ãŸï¼š

1. **AIã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰è£œå®Œ**: WebAuthn APIã®è¤‡é›‘ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œãˆã‚‹
2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯**: å‹ã‚¨ãƒ©ãƒ¼ã‚„APIã®ä½¿ç”¨ãƒŸã‚¹ã‚’æ—©æœŸã«ç™ºè¦‹
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§**: é–¢é€£ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ç´ æ—©ã„ã‚¢ã‚¯ã‚»ã‚¹

## ã¾ã¨ã‚

Cursorã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ã£ã¦ãƒ‘ã‚¹ã‚­ãƒ¼èªè¨¼ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€æœ€æ–°ã®èªè¨¼æŠ€è¡“ã«ã¤ã„ã¦å¤šãã®ã“ã¨ã‚’å­¦ã¶ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ãƒ‘ã‚¹ã‚­ãƒ¼ã¯å¾“æ¥ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«æ¯”ã¹ã¦å®‰å…¨æ€§ã¨ä½¿ã„ã‚„ã™ã•ã®ä¸¡é¢ã§å„ªã‚Œã¦ãŠã‚Šã€ä»Šå¾Œã®ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦é‡è¦ãªå½¹å‰²ã‚’æœãŸã™ã§ã—ã‚‡ã†ã€‚

å®Ÿè£…ã‚’é€šã˜ã¦ã€WebAuthn APIã®ç†è§£ãŒæ·±ã¾ã‚Šã€ã‚»ã‚­ãƒ¥ã‚¢ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰æ–¹æ³•ã‚’ç¿’å¾—ã§ãã¾ã—ãŸã€‚ã¾ãŸã€Cursorã‚¨ãƒ‡ã‚£ã‚¿ã®å¼·åŠ›ãªAIæ”¯æ´æ©Ÿèƒ½ãŒã€è¤‡é›‘ãªå®Ÿè£…ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã‚ã‚‹ä¸Šã§å¤§ããªåŠ©ã‘ã¨ãªã‚Šã¾ã—ãŸã€‚

æ¬¡å›ã¯ã€ãƒ‘ã‚¹ã‚­ãƒ¼ã‚’å®Ÿéš›ã®ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±åˆã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã™ã‚‹äºˆå®šã§ã™ã€‚

## å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [WebAuthn API - MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API)
- [SimpleWebAuthn ãƒ©ã‚¤ãƒ–ãƒ©ãƒª](https://simplewebauthn.dev/)
- [FIDO Alliance - Passkeys](https://fidoalliance.org/passkeys/)
- [Google Developers - Passkeys](https://developers.google.com/identity/passkeys)
- [Apple Developer - Supporting Passkeys](https://developer.apple.com/documentation/authenticationservices/public-private_key_authentication/supporting_passkeys/)
